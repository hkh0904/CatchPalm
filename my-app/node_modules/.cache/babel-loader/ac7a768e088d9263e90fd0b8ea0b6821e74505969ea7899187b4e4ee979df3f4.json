{"ast":null,"code":"\"use strict\";\n\n/*\n * (C) Copyright 2017-2022 OpenVidu (https://openvidu.io)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EventDispatcher = void 0;\nvar OpenViduLogger_1 = require(\"../OpenViduInternal/Logger/OpenViduLogger\");\nvar EventEmitter = require(\"wolfy87-eventemitter\");\n/**\n * @hidden\n */\nvar logger = OpenViduLogger_1.OpenViduLogger.getInstance();\nvar EventDispatcher = /** @class */function () {\n  function EventDispatcher() {\n    /**\n     * @hidden\n     */\n    this.userHandlerArrowHandler = new WeakMap();\n    /**\n     * @hidden\n     */\n    this.ee = new EventEmitter();\n  }\n  /**\n   * @hidden\n   */\n  EventDispatcher.prototype.onAux = function (type, message, handler) {\n    var arrowHandler = function (event) {\n      if (event) {\n        logger.debug(message, event);\n      } else {\n        logger.debug(message);\n      }\n      handler(event);\n    };\n    this.userHandlerArrowHandler.set(handler, arrowHandler);\n    this.ee.on(type, arrowHandler);\n    return this;\n  };\n  /**\n   * @hidden\n   */\n  EventDispatcher.prototype.onceAux = function (type, message, handler) {\n    var _this = this;\n    var arrowHandler = function (event) {\n      if (event) {\n        logger.debug(message, event);\n      } else {\n        logger.debug(message);\n      }\n      handler(event);\n      // Remove handler from map after first and only execution\n      _this.userHandlerArrowHandler.delete(handler);\n    };\n    this.userHandlerArrowHandler.set(handler, arrowHandler);\n    this.ee.once(type, arrowHandler);\n    return this;\n  };\n  /**\n   * @hidden\n   */\n  EventDispatcher.prototype.offAux = function (type, handler) {\n    if (!handler) {\n      this.ee.removeAllListeners(type);\n    } else {\n      // Must remove internal arrow function handler paired with user handler\n      var arrowHandler = this.userHandlerArrowHandler.get(handler);\n      if (!!arrowHandler) {\n        this.ee.off(type, arrowHandler);\n      }\n      this.userHandlerArrowHandler.delete(handler);\n    }\n    return this;\n  };\n  return EventDispatcher;\n}();\nexports.EventDispatcher = EventDispatcher;","map":{"version":3,"names":["OpenViduLogger_1","require","EventEmitter","logger","OpenViduLogger","getInstance","EventDispatcher","userHandlerArrowHandler","WeakMap","ee","prototype","onAux","type","message","handler","arrowHandler","event","debug","set","on","onceAux","_this","delete","once","offAux","removeAllListeners","get","off","exports"],"sources":["C:\\Users\\SSAFY\\Desktop\\catchpalm\\my-app\\node_modules\\openvidu-browser\\src\\OpenVidu\\EventDispatcher.ts"],"sourcesContent":["/*\n * (C) Copyright 2017-2022 OpenVidu (https://openvidu.io)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { Event } from '../OpenViduInternal/Events/Event';\nimport { EventMap } from '../OpenViduInternal/Events/EventMap/EventMap';\nimport { OpenViduLogger } from '../OpenViduInternal/Logger/OpenViduLogger';\n\nimport EventEmitter = require('wolfy87-eventemitter');\n\n/**\n * @hidden\n */\nconst logger: OpenViduLogger = OpenViduLogger.getInstance();\n\nexport abstract class EventDispatcher {\n    /**\n     * @hidden\n     */\n    userHandlerArrowHandler: WeakMap<(event: Event) => void, (event: Event) => void> = new WeakMap();\n    /**\n     * @hidden\n     */\n    ee = new EventEmitter();\n\n    /**\n     * Adds function `handler` to handle event `type`\n     *\n     * @returns The EventDispatcher object\n     */\n    abstract on<K extends keyof EventMap>(type: K, handler: (event: EventMap[K]) => void): this;\n\n    /**\n     * Adds function `handler` to handle event `type` just once. The handler will be automatically removed after first execution\n     *\n     * @returns The object that dispatched the event\n     */\n    abstract once<K extends keyof EventMap>(type: K, handler: (event: EventMap[K]) => void): this;\n\n    /**\n     * Removes a `handler` from event `type`. If no handler is provided, all handlers will be removed from the event\n     *\n     * @returns The object that dispatched the event\n     */\n    abstract off<K extends keyof EventMap>(type: K, handler?: (event: EventMap[K]) => void): this;\n\n    /**\n     * @hidden\n     */\n    onAux(type: string, message: string, handler: (event: Event) => void): EventDispatcher {\n        const arrowHandler = (event) => {\n            if (event) {\n                logger.debug(message, event);\n            } else {\n                logger.debug(message);\n            }\n            handler(event);\n        };\n        this.userHandlerArrowHandler.set(handler, arrowHandler);\n        this.ee.on(type, arrowHandler);\n        return this;\n    }\n\n    /**\n     * @hidden\n     */\n    onceAux(type: string, message: string, handler: (event: Event) => void): EventDispatcher {\n        const arrowHandler = (event) => {\n            if (event) {\n                logger.debug(message, event);\n            } else {\n                logger.debug(message);\n            }\n            handler(event);\n            // Remove handler from map after first and only execution\n            this.userHandlerArrowHandler.delete(handler);\n        };\n        this.userHandlerArrowHandler.set(handler, arrowHandler);\n        this.ee.once(type, arrowHandler);\n        return this;\n    }\n\n    /**\n     * @hidden\n     */\n    offAux(type: string, handler?: (event: Event) => void): EventDispatcher {\n        if (!handler) {\n            this.ee.removeAllListeners(type);\n        } else {\n            // Must remove internal arrow function handler paired with user handler\n            const arrowHandler = this.userHandlerArrowHandler.get(handler);\n            if (!!arrowHandler) {\n                this.ee.off(type, arrowHandler);\n            }\n            this.userHandlerArrowHandler.delete(handler);\n        }\n        return this;\n    }\n}\n"],"mappings":";;AAAA;;;;;;;;;;;;;;;;;;;;AAmBA,IAAAA,gBAAA,GAAAC,OAAA;AAEA,IAAAC,YAAA,GAAAD,OAAA;AAEA;;;AAGA,IAAME,MAAM,GAAmBH,gBAAA,CAAAI,cAAc,CAACC,WAAW,EAAE;AAE3D,IAAAC,eAAA;EAAA,SAAAA,gBAAA;IACI;;;IAGA,KAAAC,uBAAuB,GAA4D,IAAIC,OAAO,EAAE;IAChG;;;IAGA,KAAAC,EAAE,GAAG,IAAIP,YAAY,EAAE;EA2E3B;EApDI;;;EAGAI,eAAA,CAAAI,SAAA,CAAAC,KAAK,GAAL,UAAMC,IAAY,EAAEC,OAAe,EAAEC,OAA+B;IAChE,IAAMC,YAAY,GAAG,SAAAA,CAACC,KAAK;MACvB,IAAIA,KAAK,EAAE;QACPb,MAAM,CAACc,KAAK,CAACJ,OAAO,EAAEG,KAAK,CAAC;OAC/B,MAAM;QACHb,MAAM,CAACc,KAAK,CAACJ,OAAO,CAAC;;MAEzBC,OAAO,CAACE,KAAK,CAAC;IAClB,CAAC;IACD,IAAI,CAACT,uBAAuB,CAACW,GAAG,CAACJ,OAAO,EAAEC,YAAY,CAAC;IACvD,IAAI,CAACN,EAAE,CAACU,EAAE,CAACP,IAAI,EAAEG,YAAY,CAAC;IAC9B,OAAO,IAAI;EACf,CAAC;EAED;;;EAGAT,eAAA,CAAAI,SAAA,CAAAU,OAAO,GAAP,UAAQR,IAAY,EAAEC,OAAe,EAAEC,OAA+B;IAAtE,IAAAO,KAAA;IACI,IAAMN,YAAY,GAAG,SAAAA,CAACC,KAAK;MACvB,IAAIA,KAAK,EAAE;QACPb,MAAM,CAACc,KAAK,CAACJ,OAAO,EAAEG,KAAK,CAAC;OAC/B,MAAM;QACHb,MAAM,CAACc,KAAK,CAACJ,OAAO,CAAC;;MAEzBC,OAAO,CAACE,KAAK,CAAC;MACd;MACAK,KAAI,CAACd,uBAAuB,CAACe,MAAM,CAACR,OAAO,CAAC;IAChD,CAAC;IACD,IAAI,CAACP,uBAAuB,CAACW,GAAG,CAACJ,OAAO,EAAEC,YAAY,CAAC;IACvD,IAAI,CAACN,EAAE,CAACc,IAAI,CAACX,IAAI,EAAEG,YAAY,CAAC;IAChC,OAAO,IAAI;EACf,CAAC;EAED;;;EAGAT,eAAA,CAAAI,SAAA,CAAAc,MAAM,GAAN,UAAOZ,IAAY,EAAEE,OAAgC;IACjD,IAAI,CAACA,OAAO,EAAE;MACV,IAAI,CAACL,EAAE,CAACgB,kBAAkB,CAACb,IAAI,CAAC;KACnC,MAAM;MACH;MACA,IAAMG,YAAY,GAAG,IAAI,CAACR,uBAAuB,CAACmB,GAAG,CAACZ,OAAO,CAAC;MAC9D,IAAI,CAAC,CAACC,YAAY,EAAE;QAChB,IAAI,CAACN,EAAE,CAACkB,GAAG,CAACf,IAAI,EAAEG,YAAY,CAAC;;MAEnC,IAAI,CAACR,uBAAuB,CAACe,MAAM,CAACR,OAAO,CAAC;;IAEhD,OAAO,IAAI;EACf,CAAC;EACL,OAAAR,eAAC;AAAD,CAAC,CAnFD;AAAsBsB,OAAA,CAAAtB,eAAA,GAAAA,eAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}